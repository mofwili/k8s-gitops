# Paste the full YAML above here
apiVersion: v1
kind: ConfigMap
metadata:
  name: workflow-controller-configmap
  namespace: argo
data:
  # ────────────────────────────────────────────────────────────────
  # Artifact Repository Configuration (MinIO / S3-compatible)
  # This enables artifact passing between steps (clone → tests → build)
  # and optional log archiving
  # ────────────────────────────────────────────────────────────────
  artifactRepository: |
    s3:
      bucket: argo-artifacts
      endpoint: minio.minio.svc.cluster.local:9000
      insecure: true
      accessKeySecret:
        name: argo-minio-creds
        key: accessKey
      secretKeySecret:
        name: argo-minio-creds
        key: secretKey
      # Optional: archive all pod logs to MinIO automatically
      # archiveLogs: true

  # ────────────────────────────────────────────────────────────────
  # Optional: Other common settings (add if needed)
  # executorImage: quay.io/argoproj/argoexec:v3.5.0   # or your version
  # containerRuntimeExecutor: docker   # or k8sapi / pns / emissary
  # ────────────────────────────────────────────────────────────────
